# 常见问题

本章节汇总了使用文档阅读器过程中常见的问题和解决方案。如果您在使用过程中遇到问题，请先查阅本章节，或许可以快速找到答案。

## 安装与部署问题

### 问：如何运行本地服务器？

在项目根目录下打开终端，执行 python -m http.server 8080 命令启动服务器，然后在浏览器中访问 http://localhost:8080 即可。如果端口 8080 已被占用，可以更换为其他端口号，如 8081 或 3000。

### 问：同步脚本运行出错怎么办？

首先确保已安装 python-docx 库，执行 pip install python-docx 进行安装。然后检查 txt 目录是否存在且包含文档文件。如果错误信息显示权限问题，请确保项目目录有读写权限。如果问题仍然存在，可以查看错误信息的具体内容，或尝试以管理员身份运行终端。

### 问：GitHub Pages 部署后页面显示异常？

常见原因包括：索引文件未正确生成、配置文件路径错误、资源文件引用不正确等。请确认已运行同步脚本生成 reader/index.json 和 reader/docs/ 目录。检查 reader/config.json 中的配置是否正确。确认部署的是 reader 目录而非整个项目。

### 问：修改配置后没有生效？

如果是本地运行，尝试强制刷新浏览器（Ctrl+F5）。如果是在线部署，可能是浏览器缓存了配置文件。可以等待缓存过期，或在配置文件的 URL 后添加时间戳参数（如 config.json?t=123456）来破坏缓存。

## 功能使用问题

### 问：如何设置首页显示特定文档？

在 reader/config.json 中设置 home_page 为目标文档的文件名，例如 "01-项目简介.txt"。设置后刷新页面即可看到效果。设置为 null 可禁用此功能，显示默认欢迎页面。

### 问：搜索功能无法使用？

首先确认 reader/config.json 中 enable_search 设置为 true。检查 txt 目录中是否存在文档文件，只有已索引的文档才能被搜索。查看浏览器控制台是否有 JavaScript 错误信息，可能是其他脚本错误影响了搜索功能的执行。

### 问：主题切换后下次访问恢复默认？

主题偏好会被保存在浏览器本地存储中。如果使用了无痕模式或清除了浏览器数据，主题设置会丢失。另外，某些浏览器扩展可能会阻止本地存储的写入。如果问题持续存在，请检查浏览器设置是否允许本地存储。

### 问：文件夹折叠状态没有保存？

折叠状态目前仅在当前会话中有效，不会保存到本地存储。如果需要此功能，可以在 app.js 中添加相关逻辑，将折叠状态保存到 localStorage 中。

## 文档格式问题

### 问：Markdown 文档中的代码块不显示高亮？

系统会自动渲染代码块，但不会添加语法高亮样式。如需语法高亮功能，可以引入 Highlight.js 或 Prism.js 等语法高亮库，并修改相应的渲染逻辑。目前版本暂未内置此功能。

### 问：Mermaid 图表显示异常？

请确保使用正确的 Mermaid 语法。图表代码必须放在独立的代码块中，并指定语言为 mermaid。检查图表代码是否有语法错误，可以到 Mermaid 官方编辑器中验证代码的正确性。

### 问：文档中的图片无法显示？

图片需要与文档文件存放在同一目录或子目录中，使用相对路径引用。例如，如果图片存放在 images 文件夹中，引用路径应为 images/image.png。绝对路径和外部 URL 可能无法正常显示。

### 问：特殊字符或 Emoji 显示异常？

确保文档使用 UTF-8 编码保存。大部分特殊字符和 Emoji 在 UTF-8 编码下可以正常显示。如果仍有异常，可能是浏览器或操作系统不支持该字符。

## 性能与优化

### 问：文档很多时页面加载慢？

大量文档会影响索引生成和页面渲染速度。建议将大型文档拆分为多个小文档，合理使用文件夹分类组织。对于图片较多的文档，可以考虑使用外部图床。首次加载后，浏览器会缓存大部分资源，后续访问速度会有所提升。

### 问：如何提高搜索性能？

搜索功能目前采用简单的过滤算法，对于超大规模的文档库可能不够高效。建议控制单次搜索的结果数量，或在前端实现分页显示。如果对搜索性能有更高要求，可以考虑集成专业的搜索服务如 Algolia 或 ElasticSearch。

## 其他问题

### 问：如何添加自定义页面？

将自定义页面保存为 txt 或 md 文件放入 txt 目录即可。系统会自动将其纳入文档索引。如果需要完全自定义的页面，可以直接创建 HTML 文件放入 reader/docs 目录，但这种方式创建的页面不会出现在侧边栏目录中。

### 问：如何修改网站 Logo 或图标？

替换 reader 目录下的 favicon.ico 文件可以修改浏览器标签页图标。网站标题通过 reader/config.json 中的 site_title 配置项修改。如果需要添加 Logo 图片，可以在 index.html 中添加相应代码。

### 问：如何联系开发者？

如需报告 bug、提出建议或寻求帮助，请在 GitHub 仓库中创建 Issue。描述问题时请提供详细的环境信息（浏览器版本、操作系统等）和复现步骤，以便更好地帮助您解决问题。

### 问：可以商业使用吗？

本项目采用 MIT 开源许可证，可以自由使用、修改和分发，包括商业用途。使用时请保留项目原始的版权声明。如有大规模部署或定制开发需求，欢迎联系开发者咨询。
